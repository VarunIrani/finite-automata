(this["webpackJsonpfinite-automata"]=this["webpackJsonpfinite-automata"]||[]).push([[0],{110:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(20),r=a.n(s),l=a(9),o=a(10),c=a(6),h=a(12),u=a(11),m=a(125),p=a(117),f=a(73),d=a(118),g=a(124),y=a(77),E=a(72),v=a.n(E),S=0,b=1,x="Curve",k="Line",w=0,O=1,T=2,j=3,C=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(m.a,{bg:"dark",variant:"dark",fixed:"top"},i.a.createElement(m.a.Brand,{style:{color:"white"}},i.a.createElement(p.a,null,i.a.createElement(f.a,{lg:"4"},i.a.createElement(d.a,{style:{width:"2em"},src:v.a})),i.a.createElement(f.a,{lg:"8",className:"text-left my-auto"},"FASIM"))),i.a.createElement(m.a.Toggle,{style:{color:"white"},"aria-controls":"basic-navbar-nav"}),i.a.createElement(m.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(g.a,null,i.a.createElement(y.a,null,i.a.createElement(y.a.Toggle,{variant:"transparent",id:"file-menu",style:{color:"white"}},"File"),i.a.createElement(y.a.Menu,{"aria-labelledby":"file-menu"},i.a.createElement(y.a.Item,{onClick:this.props.newSketch},"New"),i.a.createElement(y.a.Item,null,"Import"),i.a.createElement(y.a.Item,null,"Export"),i.a.createElement(y.a.Divider,null),i.a.createElement(y.a.Item,null,"Exit"))),i.a.createElement(y.a,null,i.a.createElement(y.a.Toggle,{variant:"transparent",id:"simulate-menu",style:{color:"white"}},"Simulate"),i.a.createElement(y.a.Menu,{"aria-labelledby":"simulate-menu"},i.a.createElement(y.a.Item,{onClick:function(){return e.props.toggleSimulation(S)}},"DFA"),i.a.createElement(y.a.Item,{onClick:function(){return e.props.toggleSimulation(b)}},"NFA"))),i.a.createElement(y.a,null,i.a.createElement(y.a.Toggle,{variant:"transparent",id:"help-menu",style:{color:"white"}},"Help"),i.a.createElement(y.a.Menu,null,i.a.createElement(y.a.Item,null,"Manual"),i.a.createElement(y.a.Item,null,"Contact"))))))}}]),a}(i.a.Component),N=a(35),I=a(119),R=a(75),V=a.n(R),P={showSettings:!1,showSimulation:!1,selectedState:null},M=function(){function e(t,a,n,i,s,r,o){Object(l.a)(this,e),this.index=a,this.p5=t,this.from=n,this.to=i,this.color=s,this.controlPoints=[],this.value=r,this.lineType=o}return Object(o.a)(e,[{key:"getControlPoints",value:function(e,t){var a=this.p5.createVector(this.from.x,this.from.y),n=this.p5.createVector(this.to.x-a.x,this.to.y-a.y);this.p5.translate(a.x,a.y),t.setMag(n.mag()/2),t.rotate(60),this.controlPoints[0]=t;var i=this.p5.createVector(t.x,t.y);i.setMag(25),t=e=n,this.p5.translate(e.x,e.y),t.setMag(n.mag()/2),t.rotate(120),this.controlPoints[1]=t;var s=this.p5.createVector(t.x,t.y);s.setMag(25),this.controlPoints[2]=i,this.controlPoints[3]=s}},{key:"drawValue",value:function(e,t){t.setMag(e/1.5),t.rotate(-20),this.p5.push(),this.p5.translate(t.x+this.from.x,t.y+this.from.y),this.p5.noStroke(),this.p5.fill(this.color),this.p5.text(this.value,0,0),this.p5.pop()}},{key:"drawBezierWithArrow",value:function(){var e=this.p5.createVector(this.from.x,this.from.y),t=this.p5.createVector(this.to.x-e.x,this.to.y-e.y);this.p5.push(),this.p5.stroke(this.color),this.p5.strokeWeight(2),this.p5.fill(this.color),this.getControlPoints(e,t),this.p5.pop();var a=this.controlPoints[0],n=this.controlPoints[1],i=this.controlPoints[2],s=this.controlPoints[3];this.p5.noFill(),this.p5.stroke(this.color),this.p5.strokeWeight(2),this.p5.bezier(i.x+this.from.x,i.y+this.from.y,a.x+this.from.x,a.y+this.from.y,n.x+this.to.x,n.y+this.to.y,s.x+this.to.x,s.y+this.to.y);var r=this.p5.dist(this.from.x,this.from.y,this.to.x,this.to.y),l=this.p5.createVector(a.x,a.y);this.drawValue(r,l),a.setMag(r/1.2),a.rotate(-33),n.setMag(25);var o=a.x+this.from.x,c=a.y+this.from.y;this.p5.push(),this.p5.translate(o,c,10);var h=n.x+this.to.x,u=n.y+this.to.y,m=this.p5.createVector(h-o,u-c);this.p5.fill(this.color),this.p5.translate(m.x,m.y),this.p5.rotate(180+m.heading()),this.p5.triangle(10,5,10,-5,0,0),this.p5.pop()}},{key:"drawLineWithArrow",value:function(){var e=this.p5.createVector(this.from.x,this.from.y),t=this.p5.createVector(this.to.x-e.x,this.to.y-e.y),a=this.p5.createVector(this.to.x-e.x,this.to.y-e.y);this.p5.push(),this.p5.stroke(this.color),this.p5.strokeWeight(2),this.p5.fill(this.color),this.p5.translate(e.x,e.y),t.setMag(t.mag()-25),a.setMag(a.mag()/2),a.rotate(-8),this.p5.push(),this.p5.noStroke(),this.p5.text(this.value,a.x,a.y),this.p5.pop(),this.p5.line(0,0,t.x,t.y),this.p5.rotate(t.heading()),this.p5.translate(t.mag()-10,0),this.p5.triangle(0,5,0,-5,10,0),this.p5.pop()}},{key:"drawSelfLoop",value:function(){var e=this.p5.createVector(this.from.x-25,this.from.y);this.p5.stroke(this.color),this.p5.noFill();var t=this.p5.createVector(-75+e.x,-25+e.y),a=this.p5.createVector(100+t.x,-75+t.y),n=this.p5.createVector(this.from.x,this.from.y-25);this.p5.bezier(e.x,e.y,t.x,t.y,a.x,a.y,n.x,n.y);var i=this.p5.createVector(-50+e.x,-50+e.y);this.p5.fill(this.color),this.p5.noStroke(),this.p5.text(this.value,i.x,i.y),this.p5.push(),this.p5.translate(a.x,a.y);var s=this.p5.createVector(0,75);this.p5.translate(s.x,s.y),this.p5.rotate(-s.heading()),this.p5.triangle(10,5,10,-5,0,0),this.p5.pop()}},{key:"show",value:function(){this.from.index===this.to.index?this.drawSelfLoop():this.lineType===x?this.drawBezierWithArrow():this.drawLineWithArrow()}}]),e}(),D=function(){function e(t,a,n,i,s,r,o,c){Object(l.a)(this,e),this.p5=t,this.index=r,this.stateType=o,this.dragging=!1,this.rollover=!1,this.connecting=!1,this.connected=!1,this.transitions=[],this.intersecting=!1,this.x=a,this.y=n,this.r=this.p5.int(i/2),this.name=s,this.offsetX=0,this.offsetY=0,this.color=c}return Object(o.a)(e,[{key:"setP5",value:function(e){this.p5=e}},{key:"over",value:function(){var e=this.p5.mouseX,t=this.p5.mouseY,a=this.p5.int(this.p5.dist(this.x,this.y,e,t));this.rollover=a<this.r}},{key:"doubleClicked",value:function(){var e=this.p5.mouseX,t=this.p5.mouseY;this.p5.int(this.p5.dist(this.x,this.y,e,t))<this.r&&(this.connecting=!0)}},{key:"edgeIntersects",value:function(e){return this.p5.dist(this.x,this.y,e.x,e.y)<this.r+e.r?(this.intersecting=!0,!0):(this.intersecting=!1,!1)}},{key:"update",value:function(){var e=this.p5.mouseX,t=this.p5.mouseY;this.dragging&&(this.x=e+this.offsetX,this.y=t+this.offsetY)}},{key:"showTransitions",value:function(){this.transitions.forEach((function(e){e.show()}))}},{key:"connect",value:function(){var e=this.p5.mouseX,t=this.p5.mouseY;if(this.p5.strokeWeight(2),this.p5.stroke("#f18701"),this.connecting){var a=this.p5.createVector(this.x,this.y),n=this.p5.createVector(e-a.x,t-a.y);this.transitions.length&&this.showTransitions(),this.drawArrow(a,n,"#f18701",!0,!1)}else this.connected&&this.showTransitions()}},{key:"drawArrow",value:function(e,t,a,n,i){this.p5.push(),this.p5.stroke(a),this.p5.strokeWeight(2),this.p5.fill(a),this.p5.translate(e.x,e.y),i&&t.setMag(t.mag()-this.r),this.p5.line(0,0,t.x,t.y);n&&this.p5.rotate(t.heading()),this.p5.translate(t.mag()-10,0),this.p5.triangle(0,5,0,-5,10,0),this.p5.pop()}},{key:"show",value:function(){if(this.p5.strokeWeight(2),this.p5.fill(this.color),this.rollover||this.dragging?this.p5.stroke("#f18701"):P.showSettings||P.showSimulation?this.p5.stroke("#00916e"):this.p5.stroke(0),this.stateType===O)this.p5.circle(this.x,this.y,2*this.r);else if(this.stateType===T)this.p5.circle(this.x,this.y,2*this.r),this.p5.circle(this.x,this.y,1.7*this.r);else if(this.stateType===w){this.p5.circle(this.x,this.y,2*this.r);var e=this.p5.createVector(this.x-3*this.r,this.y),t=this.p5.createVector(this.x-this.r-e.x,this.y-e.y);this.rollover||this.dragging?this.drawArrow(e,t,"#f18701",!1,!1):P.showSettings||P.showSimulation?this.drawArrow(e,t,"#00916e",!1,!1):this.drawArrow(e,t,0,!1,!1)}this.p5.textSize(.7*this.r),this.p5.textAlign(this.p5.CENTER,this.p5.CENTER),this.p5.noStroke(),this.rollover||this.dragging?this.p5.fill("#f18701"):P.showSettings||P.showSimulation?this.p5.fill("#00916e"):this.p5.fill(0),this.p5.text(this.name,this.x,this.y)}},{key:"getTopState",value:function(e){for(var t=[],a=0;a<e.length;a++)this.edgeIntersects(e[a])&&(t.push(a),t.push(this.index));return this.p5.max(t)}},{key:"pressed",value:function(e){var t=this;if(!P.showSettings&&!P.showSimulation)if(this.p5.mouseButton===this.p5.RIGHT){var a=this.p5.mouseX,n=this.p5.mouseY;if(this.p5.int(this.p5.dist(this.x,this.y,a,n))<this.r){var i=this.getTopState(e);P.showSettings=!0,i!==Number.NEGATIVE_INFINITY&&e[i].rollover?P.selectedState=e[i]:P.selectedState=this}else P.showSettings=!1,P.selectedState=null}else{P.showSettings=!1,P.selectedState=null;var s=this.p5.mouseX,r=this.p5.mouseY,l=this.p5.int(this.p5.dist(this.x,this.y,s,r));if(!this.dragging&&l<this.r){var o=this.getTopState(e);o!==Number.NEGATIVE_INFINITY&&e[o].rollover?(e[o].offsetX=e[o].x-s,e[o].offsetY=e[o].y-r,e[o].dragging=!0):(this.offsetX=this.x-s,this.offsetY=this.y-r,this.dragging=!0)}if(this.connecting)for(var c=function(a){var n=e[a];(l=t.p5.int(t.p5.dist(n.x,n.y,s,r)))<n.r?(0===t.transitions.filter((function(e){return e.from.index===t.index&&e.to.index===n.index})).length&&(t.index===n.index?t.transitions.push(new M(t.p5,t.transitions.length,t,t,"#454ade","\u03b5",k)):t.transitions.push(new M(t.p5,t.transitions.length,t,n,"#454ade","\u03b5",k)),t.connected=!0),t.connecting=!1):t.connecting=!1},h=0;h<e.length;h++)c(h)}}},{key:"released",value:function(){this.dragging&&(this.dragging=!1)}}]),e}(),A=a(122),F=a(74),L=a(123),z=a(120),W=a(39),_=a(41),H=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={stateName:P.selectedState.name},n.changeLineType=n.changeLineType.bind(Object(c.a)(n)),n.changeStateType=n.changeStateType.bind(Object(c.a)(n)),n.changeValue=n.changeValue.bind(Object(c.a)(n)),n.changeStateName=n.changeStateName.bind(Object(c.a)(n)),n.deleteTransition=n.deleteTransition.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"changeLineType",value:function(e,t){P.selectedState.transitions[t].lineType=e,this.setState({})}},{key:"changeStateType",value:function(e){P.selectedState.stateType=e,this.setState({})}},{key:"changeValue",value:function(e,t){0===e.length?P.selectedState.transitions[t].value="\u03b5":P.selectedState.transitions[t].value=e.toString()}},{key:"deleteTransition",value:function(e,t){var a=e.transitions.filter((function(e){return e.index===t})),n=e.transitions.indexOf(a[0]);e.transitions.splice(n,1),this.setState({})}},{key:"changeStateName",value:function(e){e.length>0&&e.length<=3&&(P.selectedState.name=e,this.setState({}))}},{key:"render",value:function(){var e=this,t="";switch(P.selectedState.stateType){case O:t="Normal";break;case w:t="Initial";break;case T:t="Final";break;case j:t="Initial Final"}return i.a.createElement(A.a.Dialog,{style:{zIndex:9999}},i.a.createElement(A.a.Header,{className:"px-0"},i.a.createElement(I.a,null,i.a.createElement(p.a,null,i.a.createElement(f.a,{className:"text-left"},i.a.createElement(A.a.Title,null,t," ",this.props.title," ",P.selectedState.name)),i.a.createElement(f.a,{className:"text-right"},i.a.createElement(F.a,{variant:"danger",onClick:function(){e.props.deleteState(P.selectedState.index)}},"Delete State"))))),i.a.createElement(A.a.Body,null,i.a.createElement(I.a,{fluid:!0},i.a.createElement(p.a,null,i.a.createElement("h5",{className:"pb-2"},"General")),i.a.createElement(p.a,null,i.a.createElement(f.a,{lg:"3",className:"text-left my-auto px-0"},i.a.createElement("h6",null,"State Name")),i.a.createElement(f.a,{lg:"3",className:"my-auto text-left"},i.a.createElement(L.a.Control,{defaultValue:P.selectedState.name,placeholder:"State Name","aria-label":"State Name","aria-describedby":"state-name",onChange:function(t){e.changeStateName(t.target.value)}})),i.a.createElement(f.a,{lg:"6"})),i.a.createElement(p.a,{className:"mt-3 mb-3"},i.a.createElement(f.a,{lg:"3",className:"text-left my-auto px-0"},i.a.createElement("h6",null,"State Type")),i.a.createElement(f.a,{lg:"3",className:"my-auto text-left"},i.a.createElement(z.a,{variant:"dark",id:"state-type-dropdown",title:t},i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeStateType(w)}},"Initial")),i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeStateType(O)}},"Normal")),i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeStateType(T)}},"Final")),i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeStateType(j)}},"Initial Final")))),i.a.createElement(f.a,{lg:"6"})),P.selectedState.transitions.length?i.a.createElement("div",null,i.a.createElement(p.a,null,i.a.createElement("h5",{className:"pb-2"},"Transitions")),i.a.createElement(p.a,null,i.a.createElement(f.a,{className:"text-left"},i.a.createElement("h6",null,"Description")),i.a.createElement(f.a,{className:"text-left"},i.a.createElement("h6",null,"Value")),i.a.createElement(f.a,{className:"text-left"},i.a.createElement("h6",null,"Line Type"))),P.selectedState.transitions.map((function(t){return i.a.createElement(p.a,{className:"mb-3",key:t.index},i.a.createElement(f.a,{className:"text-left my-auto"},i.a.createElement("h6",{className:"my-auto"},t.from.name+" to "+t.to.name)),i.a.createElement(f.a,{className:"text-left"},i.a.createElement(p.a,null,i.a.createElement(f.a,null,i.a.createElement(L.a.Control,{defaultValue:t.value,placeholder:"Value","aria-label":"Value","aria-describedby":"transition-value",onChange:function(a){e.changeValue(a.target.value,t.index)}})))),t.from.index===t.to.index?i.a.createElement(f.a,{className:"text-left"},i.a.createElement(p.a,null,i.a.createElement(f.a,{lg:"6"}),i.a.createElement(f.a,{lg:"6",className:"text-right"},i.a.createElement(F.a,{variant:"danger",onClick:function(){e.deleteTransition(P.selectedState,t.index)}},i.a.createElement(W.a,{icon:_.b}))))):i.a.createElement(f.a,{className:"text-left"},i.a.createElement(p.a,null,i.a.createElement(f.a,{lg:"6"},i.a.createElement(z.a,{variant:"dark",id:"line-type-dropdown",title:t.lineType},i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeLineType(x,t.index)}},"Curve")),i.a.createElement(y.a.Item,{as:"button"},i.a.createElement("div",{onClick:function(){e.changeLineType(k,t.index)}},"Line")))),i.a.createElement(f.a,{lg:"6",className:"text-right"},i.a.createElement(F.a,{variant:"danger",onClick:function(){e.deleteTransition(P.selectedState,t.index)}},i.a.createElement(W.a,{icon:_.b}))))))}))):i.a.createElement("div",null,i.a.createElement(p.a,null,i.a.createElement("h5",{className:"pb-2"},"Transitions")),i.a.createElement(p.a,null,i.a.createElement("p",null,"No settings available. Please create transitions."))))),i.a.createElement(A.a.Footer,null,i.a.createElement(F.a,{variant:"success",onClick:this.props.toggleSettings},"Done")))}}]),a}(n.Component),B=a(54),Q=a.n(B),Y=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={valid:!1,testStrings:[],errors:[],machineData:null},n.changeTestStrings=n.changeTestStrings.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"changeTestStrings",value:function(e){var t=e.replace(/ /g,"");this.setState({testStrings:t.split(",")})}},{key:"validate",value:function(e,t){var a=this.props.states,n=[],i={machine_name:"Test Machine"};i.machine_type=e,i.alphabet_count=t.length,i.alphabets=t,i.state_count=a.length,i.states=[],0===a.length&&n.push("There aren't any states in your diagram.");var s=0,r=0,l=0;if(a.forEach((function(e){e.stateType===w&&(s+=1),e.stateType===T&&(r+=1),e.transitions.forEach((function(e){var a=e.value;(a=a.replace(/ /g,"")).includes(",")&&t.every((function(e){return a.includes(e)}))?l+=a.split(",").length:t.some((function(e){return a.includes(e)}))&&(l+=1)}))})),0===r&&n.push("There are no final states. Please add at least one final state."),0===s?n.push("There is no initial state. Please add one initial state."):s>1&&n.push("There can be only one initial state."),e===S)l!==t.length*a.length?n.push("Incomplete transitions or not enough transitions."):a.forEach((function(e){i.states.push({name:e.name,type:e.stateType,transitions:e.transitions.map((function(e){var t={};e.value.includes(",")?e.value.replace(/ /g,"").split(",").forEach((function(a){t[a]=e.to.name})):t[e.value]=e.to.name;return t}))})}));else if(e===b)if(0===l)n.push("Incomplete transitions or not enough transitions.");else{var o=a.filter((function(e){return 0===e.transitions.length})),c=a.filter((function(e){return 0!==e.transitions.length}));o.forEach((function(e){i.states.push({name:e.name,type:e.stateType,transitions:Object(N.a)(Array(1)).map((function(e){var a={};return t.forEach((function(e){a[e]="$$"})),a}))})})),c.forEach((function(e){i.states.push({name:e.name,type:e.stateType,transitions:Object(N.a)(Array(1)).map((function(a){var n={};return t.forEach((function(e){n[e]="$$"})),e.transitions.forEach((function(e){e.value.includes(",")?e.value.replace(/ /g,"").split(",").forEach((function(t){"$$"!==n[t]?n[t]+=","+e.to.name:n[t]=e.to.name})):"$$"!==n[e.value]?n[e.value]+=","+e.to.name:n[e.value]=e.to.name})),n}))})}))}0===n.length?this.setState({errors:n,valid:!0,machineData:i}):this.setState({errors:n,valid:!1})}},{key:"prepareTestCases",value:function(){var e=this,t=[];0===this.state.testStrings.length&&t.push("Please enter at least one test string");var a=this.state.machineData;a.test_strings=this.state.testStrings,0===t.length&&Q()({method:"POST",url:"https://fasim.herokuapp.com/diagram",data:JSON.stringify(a),headers:{"Content-Type":"application/json"}}).then((function(t){e.props.setSimulationData(t.data),e.close.click()})).catch((function(e){return console.log(e)})),this.setState({errors:t})}},{key:"render",value:function(){var e=this,t="";switch(this.props.machineType){case S:t="DFA";break;case b:t="NFA"}return i.a.createElement(A.a.Dialog,{style:{zIndex:9999},hidden:this.props.show},i.a.createElement(A.a.Header,null,i.a.createElement(I.a,{className:"px-0"},i.a.createElement(p.a,null,i.a.createElement(f.a,{className:"text-left"},i.a.createElement(A.a.Title,null,"Simulate ",t))))),i.a.createElement(A.a.Body,null,i.a.createElement(I.a,{fluid:!0},i.a.createElement(p.a,null,i.a.createElement("h5",{className:"pb-2"},"Test Strings")),i.a.createElement(p.a,null,i.a.createElement("p",null,"Please enter comma separated test strings")),i.a.createElement(p.a,{className:"mb-2"},i.a.createElement(L.a.Control,{disabled:!this.state.valid,placeholder:"Test Strings","aria-label":"Test Strings","aria-describedby":"test-strings",onChange:function(t){e.changeTestStrings(t.target.value)}})),this.state.errors.length?this.state.errors.map((function(e,t){return i.a.createElement(p.a,{key:t},i.a.createElement("p",{className:"text-danger"},e))})):this.state.valid?i.a.createElement(p.a,null,i.a.createElement("p",{className:"text-success"},"Wow! No errors in diagram!")):null)),i.a.createElement(A.a.Footer,null,this.state.valid?i.a.createElement(F.a,{variant:"success",onClick:function(){return e.prepareTestCases()}},"Prepare Test Cases"):i.a.createElement(F.a,{variant:"success",onClick:function(){return e.validate(e.props.machineType,["0","1"])}},"Validate"),i.a.createElement(F.a,{variant:"danger",ref:function(t){e.close=t},onClick:function(){e.setState({valid:!1,errors:[]}),e.props.toggleSimulation(null)}},"Close")))}}]),a}(n.Component),X=function(){var e=Object(N.a)(Array(26)).map((function(e,t){return String.fromCharCode(t+65)}));return e.concat(e.map((function(e){return e.toLowerCase()})))}(),$=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setup=function(e){var t=e.createCanvas(e.windowWidth,e.windowHeight);t.parent("sketch-holder"),t.position(0,0),e.angleMode(e.DEGREES),n.setState({p5:e})},n.draw=function(e){e.background(255),e.push();var t=40-n.state.testString.length;e.textSize(t),e.translate(2*-t,0),-1===n.state.currentIndex&&e.fill("#000"),n.state.testString.forEach((function(t,a){-1!==n.state.currentIndex&&(a===n.state.currentIndex?e.fill("#3575ff"):e.fill("#000")),e.text(t,e.width/3+20*a,100)})),e.pop(),n.state.states.forEach((function(t){t.setP5(e),t.connect(),t.over(),t.update(),t.show()}))},n.mousePressed=function(){n.state.states.forEach((function(e){e.pressed(n.state.states)}))},n.mouseReleased=function(){n.state.states.forEach((function(e){e.released()})),n.setState({showSettingsModal:P.showSettings})},n.doubleClicked=function(){n.state.states.forEach((function(e){e.doubleClicked()}))},n.windowResized=function(e){e.resizeCanvas(e.windowWidth,e.windowHeight)},n.sketch=function(e){e.setup=function(){return n.setup(e)},e.draw=function(){return n.draw(e)},e.windowResized=function(){return n.windowResized(e)},e.mousePressed=function(){return n.mousePressed()},e.mouseReleased=function(){return n.mouseReleased()},e.doubleClicked=function(){return n.doubleClicked()}},n.state={states:[],numStates:0,p5:null,showSettingsModal:!1,deletedCount:0,hideSimulation:!0,machineType:null,testString:[],currentIndex:-1},n.newSketch=n.newSketch.bind(Object(c.a)(n)),n.addState=n.addState.bind(Object(c.a)(n)),n.setup=n.setup.bind(Object(c.a)(n)),n.draw=n.draw.bind(Object(c.a)(n)),n.mousePressed=n.mousePressed.bind(Object(c.a)(n)),n.mouseReleased=n.mouseReleased.bind(Object(c.a)(n)),n.doubleClicked=n.doubleClicked.bind(Object(c.a)(n)),n.toggleSettings=n.toggleSettings.bind(Object(c.a)(n)),n.toggleSimulation=n.toggleSimulation.bind(Object(c.a)(n)),n.setSimulationData=n.setSimulationData.bind(Object(c.a)(n)),n.deleteState=n.deleteState.bind(Object(c.a)(n)),n.setTestCase=n.setTestCase.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"newSketch",value:function(){this.setState({states:[],numStates:0})}},{key:"addState",value:function(e){var t=this.state.states,a=this.state.p5,n=new D(a,a.width/2,a.height/2,50,X[this.state.numStates],this.state.numStates-this.state.deletedCount,e,255);t.push(n),this.setState({numStates:this.state.numStates+1,states:t})}},{key:"componentDidMount",value:function(){new V.a(this.sketch)}},{key:"toggleSettings",value:function(){this.setState({showSettingsModal:!this.state.showSettingsModal}),P.showSettings=!1}},{key:"deleteState",value:function(e){var t=this.state.states,a=t.filter((function(t){return t.index===e}))[0],n=t.filter((function(t){return t.index!==e}));n.forEach((function(e){for(var t=0;t<e.transitions.length;t++)if(e.transitions[t].to.index===a.index){e.transitions.splice(t,1);break}}));for(var i=a.index;i<n.length;i++)n[i].index-=1;this.setState({states:n,showSettingsModal:!this.state.showSettingsModal,deletedCount:this.state.deletedCount+1}),P.showSettings=!1}},{key:"toggleSimulation",value:function(e){this.setState({hideSimulation:!this.state.hideSimulation,machineType:e}),P.showSimulation=this.state.hideSimulation}},{key:"setSimulationData",value:function(e){this.props.setSimulationData(e)}},{key:"setTestCase",value:function(e){this.setState({currentIndex:-1});var t=this.state.states.filter((function(e){return e.stateType===w}))[0];this.state.states.filter((function(e){return e.stateType!==w})).forEach((function(e){e.color=255})),t.color="#ff6868";var a,n=this.state.states,i=e.testCase,s=e.testCaseNumber,r=document.querySelector("#result-".concat(s));this.setState({testString:Object(N.a)(e.testString)}),a=-1===i.transition.map((function(e){return e.N})).indexOf("N")?i.transition.length:i.transition.map((function(e){return e.N})).indexOf("N");var l=i.transition[a-1],o=n.filter((function(e){var t=Object.values(l)[0];if(t.includes(",")){var a=t.split(","),n=a[a.length-1];return e.name===n}return e.name===t}))[0];i.transition.filter((function(e){return"N"===Object.keys(e)[0]})).length<1&&i.transition.push({N:"N"}),setTimeout((function(){i.transition.forEach((function(e,t){var a,i=[];if(Object.values(e)[0].includes(",")){var s=Object.values(e)[0].split(",");s.forEach((function(e){i.push(n.filter((function(t){return t.name===e}))[0])})),a=n.filter((function(e){return!s.includes(e.name)}))}else i=n.filter((function(t){return t.name===Object.values(e)[0]})),a=n.filter((function(t){return t.name!==Object.values(e)[0]}));Object.keys(e).includes("N")?function(e,t){setTimeout((function(){e.forEach((function(e){void 0!==e&&(e.color=255)})),void 0===o?(r.classList.contains("text-danger")||r.classList.add("text-danger"),r.innerHTML="Rejected"):o.stateType===T?(r.classList.contains("text-success")||r.classList.add("text-success"),r.innerHTML="Accepted"):(r.classList.contains("text-danger")||r.classList.add("text-danger"),r.innerHTML="Rejected")}),1e3*t)}(n,t):c(i,a,t)}))}),1e3);var c=function(e,t,a){setTimeout(function(){this.setState({currentIndex:a}),e.forEach((function(e){void 0!==e&&(e.stateType===T?e.color="#01d6a4":e.color="#ff6868")})),t.forEach((function(e){e.color=255}))}.bind(this),1e3*a)}.bind(this)}},{key:"render",value:function(){var e=this,t="";return this.state.showSettingsModal&&(t=" State "),i.a.createElement("div",null,i.a.createElement(I.a,{id:"sketch-holder"}),this.state.showSettingsModal?i.a.createElement(H,{ref:function(t){return e.settings=t},title:t,toggleSettings:this.toggleSettings,deleteState:this.deleteState}):null,i.a.createElement(Y,{machineType:this.state.machineType,states:this.state.states,show:this.state.hideSimulation,toggleSimulation:function(t){return e.toggleSimulation(t)},setSimulationData:function(t){return e.setSimulationData(t)}}))}}]),a}(i.a.Component),G=a(126),q=a(121);function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Z(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var K=i.a.createElement("g",{id:"State",transform:"translate(-397 -263)"},i.a.createElement("g",{id:"Ellipse_1","data-name":"Ellipse 1",transform:"translate(397 263)",fill:"none",stroke:"#000",strokeWidth:3},i.a.createElement("circle",{cx:68.5,cy:68.5,r:68.5,stroke:"none"}),i.a.createElement("circle",{cx:68.5,cy:68.5,r:67,fill:"none"})),i.a.createElement("text",{id:"S",transform:"translate(449 350)",fontSize:50,fontFamily:"Arial"},i.a.createElement("tspan",{x:0,y:0},"S"))),U=function(e){var t=e.svgRef,a=e.title,n=Z(e,["svgRef","title"]);return i.a.createElement("svg",J({viewBox:"0 0 137 137",ref:t},n),a?i.a.createElement("title",null,a):null,K)},ee=i.a.forwardRef((function(e,t){return i.a.createElement(U,J({svgRef:t},e))}));a.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ae(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var ne=i.a.createElement("g",{id:"Initial_State","data-name":"Initial State",transform:"translate(-299 -508)"},i.a.createElement("g",{id:"Ellipse_2","data-name":"Ellipse 2",transform:"translate(397 508)",fill:"none",stroke:"#000",strokeWidth:3},i.a.createElement("circle",{cx:68.5,cy:68.5,r:68.5,stroke:"none"}),i.a.createElement("circle",{cx:68.5,cy:68.5,r:67,fill:"none"})),i.a.createElement("text",{id:"S",transform:"translate(449 595)",fontSize:50,fontFamily:"Arial"},i.a.createElement("tspan",{x:0,y:0},"S")),i.a.createElement("path",{id:"arrow",d:"M61.037,36.553V51.678L97.66,34.433,61.037,17.23V32.484H0v4.069H61.037Z",transform:"translate(299 543)",fillRule:"evenodd"})),ie=function(e){var t=e.svgRef,a=e.title,n=ae(e,["svgRef","title"]);return i.a.createElement("svg",te({viewBox:"0 0 235 137",ref:t},n),a?i.a.createElement("title",null,a):null,ne)},se=i.a.forwardRef((function(e,t){return i.a.createElement(ie,te({svgRef:t},e))}));a.p;function re(){return(re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var oe=i.a.createElement("g",{id:"Final_State","data-name":"Final State",transform:"translate(-780 -263)"},i.a.createElement("g",{id:"Ellipse_3","data-name":"Ellipse 3",transform:"translate(780 263)",fill:"none",stroke:"#000",strokeWidth:3},i.a.createElement("circle",{cx:68.5,cy:68.5,r:68.5,stroke:"none"}),i.a.createElement("circle",{cx:68.5,cy:68.5,r:67,fill:"none"})),i.a.createElement("text",{id:"S",transform:"translate(832 350)",fontSize:50,fontFamily:"Arial"},i.a.createElement("tspan",{x:0,y:0},"S")),i.a.createElement("g",{id:"Ellipse_4","data-name":"Ellipse 4",transform:"translate(790 273)",fill:"none",stroke:"#000",strokeWidth:3},i.a.createElement("circle",{cx:58.5,cy:58.5,r:58.5,stroke:"none"}),i.a.createElement("circle",{cx:58.5,cy:58.5,r:57,fill:"none"}))),ce=function(e){var t=e.svgRef,a=e.title,n=le(e,["svgRef","title"]);return i.a.createElement("svg",re({viewBox:"0 0 137 137",ref:t},n),a?i.a.createElement("title",null,a):null,oe)},he=i.a.forwardRef((function(e,t){return i.a.createElement(ce,re({svgRef:t},e))})),ue=(a.p,function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(G.a,{bg:"white",text:"dark"},i.a.createElement(q.a,{vertical:!0},i.a.createElement(F.a,{variant:"white",className:"pb-3 pt-3",onClick:function(){e.props.addState(w)}},i.a.createElement(se,null)),i.a.createElement(F.a,{variant:"white",className:"pb-3 pt-3",onClick:function(){e.props.addState(O)}},i.a.createElement(ee,null)),i.a.createElement(F.a,{variant:"white",className:"pb-3 pt-3",onClick:function(){e.props.addState(T)}},i.a.createElement(he,null))))}}]),a}(i.a.Component)),me=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.simulationData;return i.a.createElement(G.a,{bg:"white",text:"dark",hidden:null===t},i.a.createElement(G.a.Header,{style:{backgroundColor:"white"}},i.a.createElement("h5",{className:"my-auto"},"Simulate Test Cases")),i.a.createElement(G.a.Body,null,i.a.createElement(I.a,null,null===t?i.a.createElement(p.a,null,i.a.createElement("p",{className:"my-auto"},"No simulation cases available. Please click Simulate and select your type of diagram.")):i.a.createElement(i.a.Fragment,null,t.test_strings.map((function(t,a){return i.a.createElement(p.a,{key:a,className:"justify-content-between align-items-center mb-3 px-3"},i.a.createElement("p",{className:"p-0 m-0 my-auto",style:{fontSize:18}},i.a.createElement("b",null,"Test ",a+1," - "),t),i.a.createElement(F.a,{id:"play-button",variant:"success",onClick:function(){e.props.setTestCase(a)}},i.a.createElement(W.a,{icon:_.a})))})),t.test_strings.map((function(e,t){return i.a.createElement(p.a,{key:t,className:"justify-content-between align-items-center mb-3 px-3"},i.a.createElement("p",{className:"p-0 m-0 my-auto",style:{fontSize:18}},i.a.createElement("b",null,"Test ",t+1," Result - ",i.a.createElement("span",{id:"result-".concat(t)}))))}))))))}}]),a}(n.Component),pe=a(76),fe=a.n(pe),de=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={qrCodeValue:""},n.getQRImage=n.getQRImage.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"getQRImage",value:function(){var e=this;Q()({method:"GET",url:"https://fasim.herokuapp.com/getstring"}).then((function(t){e.setState({qrCodeValue:t.data})}))}},{key:"componentDidMount",value:function(){this.getQRImage(),setInterval(this.getQRImage,5e3)}},{key:"render",value:function(){return i.a.createElement(A.a,{style:{zIndex:9999},show:this.props.show,centered:!0,keyboard:!1,backdrop:"static",onHide:this.props.handleQRClose},i.a.createElement(A.a.Header,{closeButton:!0},i.a.createElement(A.a.Title,null,"Welcome to FASIM")),i.a.createElement(A.a.Body,null,i.a.createElement(I.a,null,i.a.createElement(p.a,null,i.a.createElement("p",null,"Please use our app to scan this QR Code"," ",i.a.createElement("span",{role:"img","aria-labelledby":"emo",className:"h4"},"\ud83d\udc47\ud83c\udffb"))),i.a.createElement(p.a,{className:"justify-content-center"},i.a.createElement(fe.a,{value:this.state.qrCodeValue,level:"M",renderAs:"svg",size:300,imageSettings:{width:60,height:60,src:"https://cdn.discordapp.com/attachments/759950229473722438/782512125951082496/fasim.png"}})))))}}]),a}(n.Component),ge=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={simulationData:null,loggedIn:!1},n.handleQRClose=n.handleQRClose.bind(Object(c.a)(n)),n}return Object(o.a)(a,[{key:"handleQRClose",value:function(){this.setState({loggedIn:!this.state.loggedIn})}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(de,{show:!this.state.loggedIn,handleQRClose:this.handleQRClose}),i.a.createElement($,{ref:function(t){e.sketch=t},setSimulationData:function(t){e.setState({simulationData:t})}}),i.a.createElement(I.a,{fluid:!0,style:{padding:0}},i.a.createElement(p.a,null,i.a.createElement(f.a,null,i.a.createElement(C,{newSketch:function(){e.sketch.newSketch()},toggleSimulation:function(t){e.sketch.toggleSimulation(t)}})))),i.a.createElement(I.a,{fluid:!0},i.a.createElement(p.a,null,i.a.createElement(f.a,{sm:"1",style:{zIndex:999,position:"absolute",top:80}},i.a.createElement(ue,{addState:function(t){e.sketch.addState(t)}})))),i.a.createElement(I.a,{fluid:!0},i.a.createElement(p.a,null,i.a.createElement(f.a,{sm:"3",style:{zIndex:999,position:"absolute",top:80,right:20}},i.a.createElement(me,{simulationData:this.state.simulationData,setTestCase:function(t){e.sketch.setTestCase({testString:e.state.simulationData.test_strings[t],testCaseNumber:t,testCase:e.state.simulationData.transitions[t][t]})}})))))}}]),a}(i.a.Component);a(110),a(111);r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(ge,null)),document.getElementById("root"))},72:function(e,t,a){e.exports=a.p+"static/media/fasim.dc6fb918.png"},78:function(e,t,a){e.exports=a(112)}},[[78,1,2]]]);
//# sourceMappingURL=main.5900cfec.chunk.js.map